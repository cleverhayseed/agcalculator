---
/* No frontmatter needed */
---
<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content={Astro.generator} />

    <!-- Favicon -->
    <link rel="icon" href="/favicon.svg" type="image/svg+xml" />

    <!-- Google AdSense -->
    <script
      async
      src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4050846968323757"
      crossorigin="anonymous">
    </script>

    <!-- Plausible queue (in case the external script is slow to load) -->
    <script is:inline>
      window.plausible = window.plausible || function () {
        (window.plausible.q = window.plausible.q || []).push(arguments);
      };
    </script>
    <!-- Plausible main script (site-wide) -->
    <script defer data-domain="agcalculator.com" src="https://plausible.io/js/script.js"></script>

    <!-- PWA / icons -->
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
    <link rel="icon" type="image/png" sizes="192x192" href="/icons/icon-192.png" />
    <link rel="icon" type="image/png" sizes="512x512" href="/icons/icon-512.png" />

    <!-- PWA manifest + theme color -->
    <link rel="manifest" href="/manifest.webmanifest" />
    <meta name="theme-color" content="#2F855A" />

    <!-- iOS Add to Home Screen helpers -->
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-title" content="AgCalculator" />
    <meta name="apple-mobile-web-app-status-bar-style" content="default" />

    <script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Organization",
  "name": "AgCalculator",
  "url": "https://agcalculator.com",
  "logo": "https://agcalculator.com/icons/icon-192.png",
  "sameAs": [
    "mailto:info@cleverhayseed.com"
  ]
}
</script>


    <style>
  :root{ --green:#2F855A; --slate:#334155; --bg:#F8FAFC }
  *{ box-sizing:border-box }
  body{ margin:0; font-family:system-ui,-apple-system,Segoe UI,Inter,Arial,sans-serif; background:var(--bg); color:var(--slate) }
  a{ color:var(--green); text-decoration:none }
</style>


    <!-- Pages can inject title/canonicals/JSON-LD here -->
    <slot name="head" />
  </head>

  <body>
    <slot />

    <!-- Site-wide footer -->
   <footer style="padding:2rem 1rem;color:#64748b">
  <div class="wrap" style="max-width:960px;margin:0 auto;">
<small>
  © {new Date().getFullYear()} AgCalculator ·
  <a href="/about/" style="color:#2F855A;text-decoration:none;">About</a>
  ·
  <a href="/privacy/" style="color:#2F855A;text-decoration:none;">Privacy</a>
  ·
  <a href="/terms/" style="color:#2F855A;text-decoration:none;">Terms</a>
  ·
  <a href="mailto:info@cleverhayseed.com" style="color:#2F855A;text-decoration:none;">Contact</a>
</small>


  </div>
</footer>

    <!-- Install-app logic (footer link) -->
    <script is:inline>
      (function () {
        const installLink = document.getElementById('install-app');
        if (!installLink) return;

        let deferredPrompt = null;

        // Detect iOS (no beforeinstallprompt)
        const isIOS = () => /iphone|ipad|ipod/i.test(navigator.userAgent);

        window.addEventListener('beforeinstallprompt', (e) => {
          // Prevent the mini-infobar on mobile
          e.preventDefault();
          deferredPrompt = e;
        });

        installLink.addEventListener('click', async (evt) => {
          evt.preventDefault();

          if (deferredPrompt) {
            deferredPrompt.prompt();
            const { outcome } = await deferredPrompt.userChoice;
            try { window.plausible && window.plausible('A2HS installed'); } catch {}
            deferredPrompt = null;
            return;
          }

          // Fallback guidance (works on iOS and any browser without a prompt)
          if (isIOS()) {
            alert('On iPhone/iPad: tap the Share button → “Add to Home Screen”.');
          } else {
            alert('Use your browser menu → “Install app” or “Add to Home screen”.');
          }
        });
      })();
    </script>

    <!-- Register service worker -->
    <script is:inline>
      if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
          navigator.serviceWorker.register('/sw.js').catch(console.error);
        });
      }
    </script>
  </body>
</html>
