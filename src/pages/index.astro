---
import Layout from "../layouts/Layout.astro";

const tools = [
  { title: "Grain Bin Capacity (Bushels & Weight)", href: "/calculators/grain-bin-capacity/", status: "Live" },
  { title: "Fence Planner (Perimeter, Posts, Wire)", href: "/calculators/fence-planner/", status: "Live" },
  { title: "Hay Bale Weight & Load Planner", href: "/calculators/hay-bale-planner/", status: "Live" },
];
---

<Layout>

<Fragment slot="head">
  <title>AgCalculator — Do the farm math.</title>
  <p style="margin:.25rem 0 1rem">
  <button id="install-btn" style="display:none;padding:.4rem .7rem;border:1px solid #cbd5e1;border-radius:10px;background:white;cursor:pointer">
    Add to Home Screen
  </button>
  </p>

  <meta name="description" content="Fast, offline-friendly tools for common farm & homestead jobs — including a grain bin capacity calculator." />
  <link rel="canonical" href="https://agcalculator.com/" />

  <!-- Open Graph -->
  <meta property="og:site_name" content="AgCalculator" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="AgCalculator — Do the farm math." />
  <meta property="og:description" content="Fast, offline-friendly tools for common farm & homestead jobs — including a grain bin capacity calculator." />
  <meta property="og:url" content="https://agcalculator.com/" />
  <meta property="og:image" content="https://agcalculator.com/og-home.png?v=1" />
  <meta property="og:image:width" content="1200" />
  <meta property="og:image:height" content="630" />

  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="AgCalculator — Do the farm math." />
  <meta name="twitter:description" content="Fast, offline-friendly tools for common farm & homestead jobs — including a grain bin capacity calculator." />
  <meta name="twitter:image" content="https://agcalculator.com/og-home.png?v=1" />
</Fragment>


  <header>
    <div class="wrap">
      <h1>AgCalculator</h1>
      <p>Do the farm math. Fast, offline-friendly tools for common farm &amp; homestead jobs.</p>
    </div>
  </header>

  <main class="wrap">
    <section class="grid">
      {tools.map((t) =>
        t.href ? (
          <a class="card" href={t.href}>
            <strong>{t.title}</strong>
            <div class="status">{t.status}</div>
          </a>
        ) : (
          <div class="card">
            <strong>{t.title}</strong>
            <div class="status">{t.status}</div>
          </div>
        )
      )}
    </section>
    
        <!-- Publisher content: how it works + mini FAQ -->
    <section class="content">
      <h2>How AgCalculator helps</h2>
      <p>AgCalculator provides lightweight, offline-friendly tools for common farm and homestead math. Each calculator shows the formulas used so you can verify the numbers before you buy materials or operate equipment.</p>

      <h3>What’s inside</h3>
      <ul>
        <li><a href="/calculators/grain-bin-capacity/">Grain Bin Capacity</a> — cylinder + cone math to estimate bushels, weight, and fill %.</li>
        <li><a href="/calculators/fence-planner/">Fence Planner</a> — perimeter, posts, gate openings, wire length, and rolls.</li>
        <li><a href="/calculators/hay-bale-planner/">Hay Bale Planner</a> — bale volume, weight by density, and max bales by payload.</li>
      </ul>

      <h3>FAQ</h3>
      <p><strong>Are these results exact?</strong> They’re estimates based on geometry and typical defaults. Always verify before purchasing materials or operating equipment.</p>
      <p><strong>Do the tools work offline?</strong> Yes—this site is a small PWA. Add it to your home screen and it’ll work with no connection.</p>
    </section>

    <style>
      .content{background:white;border:1px solid #e5e7eb;border-radius:12px;padding:1rem;margin:1rem 1rem 0}
      .content h2{margin:.2rem 0 .6rem}
      .content h3{margin:.8rem 0 .3rem}
      .content ul{margin:.2rem 0 .2rem 1.1rem}
      @media(min-width:720px){ .content{margin:1rem auto 0; max-width:960px} }
    </style>

    <script is:inline>
  let deferredPrompt;
  const btn = document.getElementById('install-btn');

  const isStandalone =
    window.matchMedia('(display-mode: standalone)').matches || window.navigator.standalone;

  const isIOS = /iphone|ipad|ipod/i.test(navigator.userAgent);

  // Show button for Android/desktop when installable
  window.addEventListener('beforeinstallprompt', (e) => {
    e.preventDefault();
    deferredPrompt = e;
    if (!isStandalone) btn.style.display = 'inline-block';
  });

  // Show button on iOS (no prompt API) if not installed
  if (isIOS && !isStandalone) btn.style.display = 'inline-block';

  btn.addEventListener('click', async () => {
    if (deferredPrompt) {
      deferredPrompt.prompt();
      const { outcome } = await deferredPrompt.userChoice;
      deferredPrompt = null;
      btn.textContent = outcome === 'accepted' ? 'Installed' : 'Add to Home Screen';
    } else if (isIOS) {
      alert('On iPhone/iPad: tap the Share icon → “Add to Home Screen”.');
    }
  });
</script>

  </main>

  <footer class="wrap">
    <small>Estimates only. Verify before purchasing materials or operating equipment.</small>
  </footer>

  <style>
    :root{--green:#2F855A;--slate:#334155;--bg:#F8FAFC}
    *{box-sizing:border-box}
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Inter,Arial,sans-serif;background:var(--bg);color:var(--slate)}
    a{color:inherit;text-decoration:none}
    header{padding:2rem 1rem;border-bottom:1px solid #e5e7eb;background:white}
    .wrap{max-width:960px;margin:0 auto}
    h1{margin:0;font-size:clamp(1.6rem,2.6vw,2.2rem);color:var(--green)}
    p{margin:.5rem 0 0}
    .grid{display:grid;gap:1rem;padding:1.25rem 1rem}
    @media(min-width:720px){.grid{grid-template-columns:repeat(2,1fr)}}
    .card{padding:1rem;border:1px solid #e5e7eb;border-radius:14px;background:white;display:block}
    .status{display:inline-block;margin-top:.4rem;padding:.15rem .5rem;border-radius:999px;background:#94a3b8;color:white;font-size:.8rem}
    footer{padding:2rem 1rem;color:#64748b}
  </style>
</Layout>
