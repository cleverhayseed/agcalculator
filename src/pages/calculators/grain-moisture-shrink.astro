---
import Layout from "../../layouts/Layout.astro";
---
<Layout>
  <Fragment slot="head">
    <title>Grain Moisture Shrink &amp; Drying Cost Calculator | AgCalculator</title>
    <meta name="description" content="Estimate moisture shrink, net bushels, weight removed, final weight, and drying cost from start to target moisture. US ↔ Metric toggle." />
    <link rel="canonical" href="https://agcalculator.com/calculators/grain-moisture-shrink/" />

    <!-- Open Graph -->
    <meta property="og:site_name" content="AgCalculator" />
    <meta property="og:title" content="Grain Moisture Shrink &amp; Drying Cost Calculator" />
    <meta property="og:description" content="Estimate moisture shrink, net bushels, weight removed, and drying cost quickly." />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://agcalculator.com/calculators/grain-moisture-shrink/" />
    <meta property="og:image" content="https://agcalculator.com/og-grain-bin.png" />
    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="630" />

    <!-- Structured data -->
    <script type="application/ld+json">
    {
      "@context":"https://schema.org",
      "@type":"WebApplication",
      "name":"Grain Moisture Shrink & Drying Cost Calculator",
      "applicationCategory":"Calculator",
      "operatingSystem":"Web",
      "url":"https://agcalculator.com/calculators/grain-moisture-shrink/",
      "description":"Estimate moisture shrink, net bushels, weight removed, final weight, and drying cost from start to target moisture.",
      "publisher":{"@type":"Organization","name":"AgCalculator","url":"https://agcalculator.com"},
      "offers":{"@type":"Offer","price":"0","priceCurrency":"USD"}
    }
    </script>
    <script type="application/ld+json">
    {
      "@context":"https://schema.org",
      "@type":"BreadcrumbList",
      "itemListElement":[
        {"@type":"ListItem","position":1,"name":"Home","item":"https://agcalculator.com/"},
        {"@type":"ListItem","position":2,"name":"Grain Moisture Shrink & Drying Cost","item":"https://agcalculator.com/calculators/grain-moisture-shrink/"}
      ]
    }
    </script>
    <!-- FAQ schema (matches on-page FAQ) -->
    <script type="application/ld+json">
    {
      "@context":"https://schema.org",
      "@type":"FAQPage",
      "mainEntity":[
        {
          "@type":"Question",
          "name":"What shrink factor does this use?",
          "acceptedAnswer":{"@type":"Answer","text":"Dry Matter basis: net = wet × (100 − start%) ⁄ (100 − target%). This yields fewer bushels when drying from a higher to a lower moisture."}
        },
        {
          "@type":"Question",
          "name":"How is drying cost estimated?",
          "acceptedAnswer":{"@type":"Answer","text":"Enter a rate in $ per percentage point per bushel. Cost = wet bushels × max(start% − target%, 0) × rate. Check your local schedule."}
        },
        {
          "@type":"Question",
          "name":"Can I use metric units?",
          "acceptedAnswer":{"@type":"Answer","text":"Yes. Use the US↔Metric toggle. Bushels stay in U.S. bu; weights show in lb/tons or kg/t, and test weight switches between lb/bu and kg/hl."}
        },
        {
          "@type":"Question",
          "name":"What test weight should I use?",
          "acceptedAnswer":{"@type":"Answer","text":"Use your measured test weight for best accuracy (e.g., corn commonly 56 lb/bu, soybeans 60 lb/bu)."}
        }
      ]
    }
    </script>

    <style>
      :root{--green:#2F855A;--slate:#334155;--muted:#64748b;--bg:#F8FAFC}
      *{box-sizing:border-box}
      header{padding:1rem;border-bottom:1px solid #e5e7eb;background:#fff}
      .wrap{max-width:960px;margin:0 auto;padding:1rem}
      a{color:var(--green);text-decoration:none}
      fieldset{background:#fff;border:1px solid #e5e7eb;border-radius:12px;margin:0 0 1rem;padding:1rem}
      legend{padding:0 .4rem;color:var(--muted)}
      label{display:block;margin:.4rem 0 .2rem;font-size:.92rem}
      input,select{width:100%;padding:.6rem;border:1px solid #cbd5e1;border-radius:10px}
      .row{display:grid;gap:.8rem}
      @media(min-width:800px){.row{grid-template-columns:repeat(3,1fr)}}
      .result{background:#fff;border:1px solid #e5e7eb;border-radius:12px;padding:1rem}
      .note{color:var(--muted);font-size:.9rem}
      .content{background:#fff;border:1px solid #e5e7eb;border-radius:12px;padding:1rem;margin-top:1rem}
      .content h2{margin:.2rem 0 .6rem}
      .content h3{margin:.8rem 0 .3rem}
      .content ul,.content ol{margin:.2rem 0 .2rem .9rem}
      .content .disclaimer{color:#64748b;margin-top:.6rem}
      /* Units toggle */
      .unit-toggle{display:flex;align-items:center;gap:.4rem;margin:0 0 1rem;padding:.5rem 1rem;background:#fff;border:1px solid #e2e8f0;border-radius:12px}
      .u-btn{padding:.35rem .7rem;border:1px solid #cbd5e1;border-radius:999px;background:#fff;cursor:pointer}
      .u-btn.active{background:var(--green);border-color:var(--green);color:#fff}
    </style>
  </Fragment>

  <header><div class="wrap"><a href="/">← AgCalculator</a></div></header>

  <main class="wrap">
    <h1 style="margin:.5rem 0 1rem">Grain Moisture Shrink &amp; Drying Cost</h1>

    <!-- Units toggle -->
    <div class="unit-toggle" role="group" aria-label="Units">
      <strong style="margin-right:.25rem">Units:</strong>
      <button type="button" class="u-btn active" data-units="us" aria-pressed="true">US</button>
      <button type="button" class="u-btn" data-units="metric" aria-pressed="false">Metric</button>
      <small class="note" style="margin-left:.5rem">Saved on this device</small>
    </div>

    <fieldset>
      <legend>Inputs</legend>
      <div class="row">
        <div>
          <label for="wetBu">Wet bushels</label>
          <input id="wetBu" type="number" step="1" placeholder="e.g. 12000" />
        </div>
        <div>
          <label for="startM">Start moisture (%)</label>
          <input id="startM" type="number" step="0.1" placeholder="e.g. 19" />
        </div>
        <div>
          <label for="targetM">Target moisture (%)</label>
          <input id="targetM" type="number" step="0.1" placeholder="e.g. 15" />
        </div>
      </div>

      <div class="row">
        <div>
          <label data-unit-label="Test weight (lb/bu)|Test weight (kg/hl)" for="tw">Test weight (lb/bu)</label>
          <input id="tw" type="number" step="0.1" value="56" data-unit="lbbu>kghl" data-unit-ph="e.g. 56|e.g. 72.1" />
        </div>
        <div>
          <label for="elevShrink">Elevator policy shrink (% of wet bu, optional)</label>
          <input id="elevShrink" type="number" step="0.01" placeholder="e.g. 1.5" />
        </div>
        <div>
          <label for="dryRate">Drying rate ($/pt/bu, optional)</label>
          <input id="dryRate" type="number" step="0.001" placeholder="e.g. 0.04" />
        </div>
      </div>

      <p class="note">Tip: If you don’t want elevator policy or drying cost, leave those blank. Bushels are U.S. bushels even in metric mode.</p>
    </fieldset>

    <section class="result">
      <div class="note">Results</div>
      <div style="display:grid;gap:.5rem;margin-top:.4rem">
        <div><strong>Base shrink factor (DM):</strong> <span id="shrinkFactor">—</span></div>
        <div><strong>Net bushels (base):</strong> <span id="netBu">—</span> bu</div>
        <div><strong>Elevator policy shrink:</strong> <span id="elevBu">—</span> bu</div>
        <div><strong>Final net bushels:</strong> <span id="finalBu">—</span> bu</div>
        <div><strong>Final net weight:</strong> <span id="finalLb">—</span> <span data-unit-text="lb|kg"></span> (<span id="finalT">—</span> <span data-unit-text="tons|t"></span>)</div>
        <div><strong>Weight removed (water + fines):</strong> <span id="lostLb">—</span> <span data-unit-text="lb|kg"></span> (<span id="lostT">—</span> <span data-unit-text="tons|t"></span>)</div>
        <div><strong>Estimated drying cost:</strong> <span id="dryCost">—</span></div>
      </div>
      <p class="note" style="margin-top:.6rem">Estimates only. Policies vary—confirm with your elevator or dryer.</p>
    </section>

    <section class="content" id="explain">
      <h2>How we got these numbers</h2>
      <div id="steps" class="note">Enter values to see the step-by-step.</div>

      <h3>Formulas</h3>
      <ul>
        <li><strong>Base shrink factor</strong> = (100 − start%) ÷ (100 − target%)</li>
        <li><strong>Net bu (base)</strong> = wet bu × base shrink factor</li>
        <li><strong>Elevator policy shrink</strong> (optional) = wet bu × policy%</li>
        <li><strong>Final net bu</strong> = max(0, net bu (base) − policy bu)</li>
        <li><strong>Final weight (lb)</strong> = final net bu × test weight</li>
        <li><strong>Weight removed (lb)</strong> = (wet bu − final net bu) × test weight</li>
        <li><strong>Drying cost</strong> (optional) = wet bu × max(start − target, 0) × $/pt/bu</li>
      </ul>

      <h3>Worked example</h3>
      <p>12,000 wet bu, 19% → 15%, corn 56 lb/bu, 1.5% policy, $0.04/pt/bu:</p>
      <ol>
        <li>Base shrink = (100−19)/(100−15) = 81/85 ≈ <strong>0.9529</strong></li>
        <li>Net bu (base) = 12,000 × 0.9529 ≈ <strong>11,435 bu</strong></li>
        <li>Policy bu = 12,000 × 0.015 = <strong>180 bu</strong></li>
        <li>Final net bu ≈ 11,435 − 180 = <strong>11,255 bu</strong></li>
        <li>Final weight ≈ 11,255 × 56 = <strong>630,280 lb</strong> (~<strong>315.1 tons</strong>)</li>
        <li>Weight removed ≈ (12,000 − 11,255) × 56 = <strong>41,720 lb</strong> (~<strong>20.86 tons</strong>)</li>
        <li>Drying cost ≈ 12,000 × (19−15) × 0.04 = <strong>$1,920</strong></li>
      </ol>

      <h3>Assumptions &amp; notes</h3>
      <ul>
        <li>Uses the Dry Matter (DM) method; elevators may have additional shrink or handling rules.</li>
        <li>Bushels are volumetric but this method treats conversions on a weight basis using your test weight.</li>
        <li>Entering a higher start% than target% is required for positive shrink; equal or lower values yield zero shrink.</li>
        <li>Metric display converts lb ↔ kg and tons ↔ t; bushels remain U.S. bu. Test weight flips lb/bu ↔ kg/hl.</li>
      </ul>

      <p class="disclaimer">Prepared by AgCalculator · Last updated October 27, 2025</p>
    </section>

    <section class="content">
      <h3>Also try…</h3>
      <ul>
        <li><a href="/calculators/grain-bin-capacity/">Grain Bin Capacity (Bushels &amp; Weight)</a></li>
      </ul>
    </section>
  </main>

  <!-- Units helper (page-local) -->
  <script is:inline>
    (function () {
      const KEY = 'agc_units';
      const $$ = (s) => document.querySelectorAll(s);
      const conv = {
        // Test weight lb/bu ↔ kg/hl
        'lbbu>kghl': x => x * 1.287185997, 'kghl>lbbu': x => x / 1.287185997,
        // Weights
        'lb>kg': x => x * 0.45359237,  'kg>lb': x => x / 0.45359237,
        'lb>t':  x => x * 0.00045359237,'t>lb': x => x / 0.00045359237
      };
      window.AGCUnits = {
        mode: () => localStorage.getItem(KEY) || 'us',
        setMode(m){ localStorage.setItem(KEY, m); paint(m); },
        get(el){ // normalize to US units for math
          const raw = parseFloat(el.value);
          if (!isFinite(raw)) return NaN;
          const map = (el.dataset.unit || '').trim();
          if (!map) return raw;
          const [us, met] = map.split('>');
          if (this.mode()==='us') return raw;
          const fn = conv[`${met}>${us}`];
          return fn ? fn(raw) : raw;
        },
        out(usNumber, map){
          if (!isFinite(usNumber)) return NaN;
          if (this.mode()==='us' || !map) return usNumber;
          const fn = conv[map];
          return fn ? fn(usNumber) : usNumber;
        },
        conv
      };
      function paint(mode){
        document.querySelectorAll('.unit-toggle .u-btn').forEach(btn => {
          const on = btn.dataset.units === mode;
          btn.classList.toggle('active', on);
          btn.setAttribute('aria-pressed', String(on));
        });
        $$('[data-unit-label]').forEach(el => {
          const [us, met] = el.dataset.unitLabel.split('|');
          el.textContent = (mode==='metric' ? met : us);
        });
        $$('input[data-unit-ph]').forEach(el => {
          const [us, met] = el.dataset.unitPh.split('|');
          el.placeholder = (mode==='metric' ? met : us);
        });
        $$('[data-unit-text]').forEach(el => {
          const [us, met] = el.dataset.unitText.split('|');
          el.textContent = (mode==='metric' ? met : us);
        });
        // Recompute with current values
        document.querySelectorAll('input,select').forEach(el => {
          el.dispatchEvent(new Event('input',{bubbles:true}));
          el.dispatchEvent(new Event('change',{bubbles:true}));
        });
      }
      document.addEventListener('click', (e)=>{
        const btn = e.target.closest('.u-btn');
        if (!btn) return;
        window.AGCUnits.setMode(btn.dataset.units);
      });
      // Init
      paint(window.AGCUnits.mode());
    })();
  </script>

  <!-- Calculator logic (page-local) -->
  <script is:inline>
    // Helpers
    const $ = (id) => document.getElementById(id);
    const num = (id) => parseFloat(($(id)?.value ?? "").trim());
    const fmt0 = (n) => Number.isFinite(n) ? n.toLocaleString(undefined,{maximumFractionDigits:0}) : "—";
    const fmt1 = (n) => Number.isFinite(n) ? n.toLocaleString(undefined,{maximumFractionDigits:1}) : "—";
    const money = (n) => Number.isFinite(n) ? "$"+n.toLocaleString(undefined,{minimumFractionDigits:2,maximumFractionDigits:2}) : "—";

    const inputs = ["wetBu","startM","targetM","tw","elevShrink","dryRate"];
    inputs.forEach(id => $(id).addEventListener("input", compute));

    function compute(){
      const wetBu = num("wetBu");
      const s = num("startM");
      const t = num("targetM");
      const tw_lbb = window.AGCUnits.get($("tw")) || 56; // normalize to lb/bu
      const policyPct = num("elevShrink");     // %
      const dryRate = num("dryRate");          // $/pt/bu

      if(!(wetBu>0) || !(s>=0) || !(t>=0)){
        show(); $("steps").innerHTML = `<span class="note">Enter wet bushels and moistures to see the step-by-step.</span>`; return;
      }

      // Base shrink (Dry Matter basis): net = wet × (100 - s) / (100 - t)
      const denom = (100 - t);
      const shrinkFactor = denom>0 ? ((100 - s) / denom) : NaN;

      const netBase = Number.isFinite(shrinkFactor) ? (wetBu * shrinkFactor) : NaN;

      // Elevator policy shrink as % of wet bu
      const policyBu = (policyPct>0 && wetBu>0) ? wetBu * (policyPct/100) : 0;

      const finalBu = Number.isFinite(netBase) ? Math.max(0, netBase - policyBu) : NaN;

      // Weights (US)
      const finalLbUS = Number.isFinite(finalBu) ? finalBu * tw_lbb : NaN;
      const lostBu = Number.isFinite(finalBu) ? Math.max(0, wetBu - finalBu) : NaN;
      const lostLbUS = Number.isFinite(lostBu) ? lostBu * tw_lbb : NaN;
      const finalTUS = Number.isFinite(finalLbUS) ? (finalLbUS/2000) : NaN;
      const lostTUS  = Number.isFinite(lostLbUS)  ? (lostLbUS/2000)  : NaN;

      // Drying cost
      const points = Math.max(0, s - t);
      const cost = (dryRate>0 && wetBu>0 && points>0) ? wetBu * points * dryRate : NaN;

      // Steps
      const lines = [];
      if (Number.isFinite(shrinkFactor)) lines.push(`<div>Base shrink factor = (100 − ${s}) ÷ (100 − ${t}) = <strong>${shrinkFactor.toFixed(4)}</strong></div>`);
      if (Number.isFinite(netBase))      lines.push(`<div>Net bu (base) = ${fmt0(wetBu)} × ${shrinkFactor.toFixed(4)} = <strong>${fmt0(netBase)}</strong> bu</div>`);
      if (policyPct>0)                   lines.push(`<div>Policy shrink = ${fmt0(wetBu)} × ${policyPct}% = <strong>${fmt0(policyBu)}</strong> bu</div>`);
      if (Number.isFinite(finalBu))      lines.push(`<div>Final net bu = ${fmt0(netBase)} − ${fmt0(policyBu)} = <strong>${fmt0(finalBu)}</strong> bu</div>`);
      if (Number.isFinite(finalLbUS))    lines.push(`<div>Final weight = ${fmt0(finalBu)} × ${tw_lbb.toFixed(1)} = <strong>${fmt0(finalLbUS)}</strong> lb</div>`);
      if (Number.isFinite(lostLbUS))     lines.push(`<div>Weight removed = (${fmt0(wetBu)} − ${fmt0(finalBu)}) × ${tw_lbb.toFixed(1)} = <strong>${fmt0(lostLbUS)}</strong> lb</div>`);
      if (Number.isFinite(cost))         lines.push(`<div>Drying cost = ${fmt0(wetBu)} × ${points} pt × ${money(dryRate)} = <strong>${money(cost)}</strong></div>`);
      $("steps").innerHTML = lines.length ? `<div style="display:grid;gap:.35rem">${lines.join("")}</div>` : `<span class="note">Enter values to see the step-by-step.</span>`;

      // Display with unit conversion
      const metric = (window.AGCUnits.mode()==='metric');
      const finalKg = window.AGCUnits.out(finalLbUS, 'lb>kg');
      const finalT  = window.AGCUnits.out(finalLbUS, 'lb>t');
      const lostKg  = window.AGCUnits.out(lostLbUS, 'lb>kg');
      const lostT   = window.AGCUnits.out(lostLbUS, 'lb>t');

      show({
        shrinkFactor,
        netBase,
        policyBu,
        finalBu,
        finalLb: metric ? finalKg : finalLbUS,
        finalT:  metric ? finalT  : finalTUS,
        lostLb:  metric ? lostKg  : lostLbUS,
        lostT:   metric ? lostT   : lostTUS,
        cost
      });
    }

    function show(o={}){
      $("shrinkFactor").textContent = Number.isFinite(o.shrinkFactor) ? o.shrinkFactor.toFixed(4) : "—";
      $("netBu").textContent  = fmt0(o.netBase);
      $("elevBu").textContent = fmt0(o.policyBu);
      $("finalBu").textContent = fmt0(o.finalBu);
      $("finalLb").textContent  = fmt0(o.finalLb);
      $("finalT").textContent   = fmt1(o.finalT);
      $("lostLb").textContent  = fmt0(o.lostLb);
      $("lostT").textContent   = fmt1(o.lostT);
      $("dryCost").textContent = money(o.cost);
    }

    compute();
  </script>
</Layout>
