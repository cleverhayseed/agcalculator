---
import Layout from "../../layouts/Layout.astro";

const GRAINS = [
  { key: "corn", name: "Corn", tw: 56 },
  { key: "wheat", name: "Wheat", tw: 60 },
  { key: "soy", name: "Soybeans", tw: 60 },
  { key: "oats", name: "Oats", tw: 32 },
  { key: "barley", name: "Barley", tw: 48 },
  { key: "sorghum", name: "Grain Sorghum / Milo", tw: 56 },
  { key: "canola", name: "Canola", tw: 50 },
  { key: "other", name: "Other (set test weight)", tw: 56 },
];
---

<Layout>
  <Fragment slot="head">
    <title>Grain Bin Capacity Calculator (Bushels &amp; Weight) | AgCalculator</title>
    <meta name="description" content="Calculate grain bin capacity in bushels and estimate grain weight fast. Supports common bin sizes and dimensions." />
    <link rel="canonical" href="https://agcalculator.com/calculators/grain-bin-capacity/" />

    <!-- Social -->
    <meta property="og:site_name" content="AgCalculator" />
    <meta property="og:title" content="Grain Bin Capacity Calculator (Bushels &amp; Weight)" />
    <meta property="og:description" content="Calculate grain bin capacity in bushels and estimate grain weight fast." />
    <meta property="og:url" content="https://agcalculator.com/calculators/grain-bin-capacity/" />
    <meta property="og:type" content="website" />
    <meta name="twitter:card" content="summary_large_image" />

    <meta property="og:image" content="https://agcalculator.com/og-grain-bin.png" />
    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="630" />
    <meta name="twitter:image" content="https://agcalculator.com/og-grain-bin.png" />

    <!-- Structured data -->
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "Grain Bin Capacity Calculator",
        "applicationCategory": "Calculator",
        "operatingSystem": "Web",
        "url": "https://agcalculator.com/calculators/grain-bin-capacity/",
        "description": "Calculate grain bin capacity in bushels and estimate grain weight fast.",
        "publisher": { "@type": "Organization", "name": "AgCalculator", "url": "https://agcalculator.com" },
        "offers": { "@type": "Offer", "price": "0", "priceCurrency": "USD" }
      }
    </script>
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "BreadcrumbList",
        "itemListElement": [
          { "@type": "ListItem", "position": 1, "name": "Home", "item": "https://agcalculator.com/" },
          { "@type": "ListItem", "position": 2, "name": "Grain Bin Capacity Calculator", "item": "https://agcalculator.com/calculators/grain-bin-capacity/" }
        ]
      }
    </script>
  </Fragment>

  <header>
    <div class="wrap"><a href="/">← AgCalculator</a></div>
  </header>

  <main class="wrap">
    <h1 style="margin:.5rem 0 1rem">Grain Bin Capacity (Bushels &amp; Weight)</h1>

    <fieldset>
      <legend>Inputs (imperial)</legend>

      <div class="row">
        <div>
          <label for="grain">Grain</label>
          <select id="grain">
            {GRAINS.map((g) => <option value={g.key} data-tw={g.tw}>{g.name}</option>)}
          </select>
        </div>
        <div>
          <label for="tw">Test weight (lb/bu)</label>
          <input id="tw" type="number" step="0.1" value="56" />
        </div>
        <div>
          <label for="shrink">Moisture shrink (%)</label>
          <input id="shrink" type="number" step="0.1" value="0" />
        </div>
      </div>

      <div class="row">
        <div>
          <label for="diam">Bin diameter (ft)</label>
          <input id="diam" type="number" step="0.01" placeholder="e.g. 36" />
        </div>
        <div>
          <label for="wall">Straight-wall height (ft)</label>
          <input id="wall" type="number" step="0.01" placeholder="e.g. 24" />
        </div>
        <div>
          <label for="roofType">Roof type</label>
          <select id="roofType">
            <option value="flat">Flat</option>
            <option value="cone">Conical</option>
          </select>
        </div>
      </div>

      <div class="row">
        <div>
          <label for="roofH">Conical roof height (ft)</label>
          <input id="roofH" type="number" step="0.01" placeholder="0" />
        </div>
        <div>
          <label for="hopH">Hopper height (optional, ft)</label>
          <input id="hopH" type="number" step="0.01" placeholder="0" />
        </div>
        <div>
          <label for="have">Reverse: if I have this many bushels…</label>
          <input id="have" type="number" step="1" placeholder="e.g. 12000" />
        </div>
      </div>

      <p class="note">Tip: Leave roof/hopper at 0 if you have a flat roof or no hopper.</p>
    </fieldset>

    <section class="result" id="out">
      <div class="note">Results</div>
      <div style="display:grid;gap:.5rem;margin-top:.4rem">
        <div><strong>Bushels:</strong> <span id="bushels">—</span></div>
        <div><strong>Weight:</strong> <span id="lbs">—</span> lb (<span id="tons">—</span> tons)</div>
        <div><strong>Volume:</strong> <span id="cft">—</span> ft³</div>
        <div style="margin-top:.5rem">
          <div class="note">Fill estimate (from reverse input)</div>
          <div style="font-variant-numeric:tabular-nums;font-size:1.2rem"><span id="fillPct">—</span></div>
          <div class="gauge"><div id="bar" class="bar"></div></div>
        </div>
      </div>
      <p class="note" style="margin-top:.6rem">Estimates only. Verify before purchasing materials or operating equipment.</p>
    </section>
  </main>

  <style>
    :root{--green:#2F855A;--slate:#334155;--muted:#64748b;--bg:#F8FAFC}
    *{box-sizing:border-box}
    a{color:var(--green);text-decoration:none}
    header{padding:1rem;border-bottom:1px solid #e5e7eb;background:white}
    .wrap{max-width:960px;margin:0 auto;padding:1rem}
    fieldset{background:white;border:1px solid #e5e7eb;border-radius:12px;margin:0 0 1rem;padding:1rem}
    legend{padding:0 .4rem;color:var(--muted)}
    label{display:block;margin:.4rem 0 .2rem;font-size:.92rem}
    input,select{width:100%;padding:.6rem;border:1px solid #cbd5e1;border-radius:10px}
    .row{display:grid;gap:.8rem}
    @media(min-width:800px){.row{grid-template-columns:repeat(3,1fr)}}
    .result{background:white;border:1px solid #e5e7eb;border-radius:12px;padding:1rem}
    .note{color:var(--muted);font-size:.9rem}
    .gauge{height:10px;background:#e5e7eb;border-radius:999px;overflow:hidden}
    .bar{height:100%;background:var(--green);width:0%}
  </style>

  <script type="module">
    const $ = (id) => document.getElementById(id);
    const fields = ["grain","tw","shrink","diam","wall","roofType","roofH","hopH","have"];
    fields.forEach((id) => $(id).addEventListener("input", compute));
    $("grain").addEventListener("change", (e) => {
      const opt = e.target.selectedOptions[0];
      $("tw").value = opt.dataset.tw || "56";
      compute();
    });

    function num(id){ return parseFloat($(id).value || ""); }
    function fmt(n, d=0){ return Number.isFinite(n) ? n.toLocaleString(undefined,{maximumFractionDigits:d,minimumFractionDigits:d}) : "—"; }

    function compute(){
      const d = num("diam"), wall = num("wall"), roofH = num("roofH") || 0, hopH = num("hopH") || 0;
      if(!(d>0 && wall>=0)) { show(NaN,NaN,NaN,NaN); return; }

      const r = d/2;
      const cyl = Math.PI * r * r * wall;                   // ft³
      const roof = $("roofType").value === "cone" && roofH>0 ? (Math.PI * r * r * roofH / 3) : 0;
      const hopper = hopH>0 ? (Math.PI * r * r * hopH / 3) : 0;
      const ft3 = cyl + roof + hopper;

      let bu = ft3 / 1.2445;                                // ft³ → bushels
      const shrink = parseFloat($("shrink").value || "0");
      if(shrink>0) bu *= (1 - shrink/100);

      const tw = num("tw") || 56;
      const pounds = bu * tw;
      const tons = pounds / 2000;

      const have = num("have");
      const pct = (have>0 && bu>0) ? Math.min(100, (have/bu)*100) : NaN;

      show(bu, pounds, ft3, tons, pct);
    }

    function show(bu, lbs, ft3, tons, pct){
      $("bushels").textContent = fmt(bu,0);
      $("lbs").textContent = fmt(lbs,0);
      $("tons").textContent = fmt(tons,1);
      $("cft").textContent = fmt(ft3,0);
      $("fillPct").textContent = Number.isFinite(pct) ? fmt(pct,1) + "%" : "—";
      $("bar").style.width = Number.isFinite(pct) ? Math.max(0, Math.min(100, pct)) + "%" : "0%";
    }

    compute();
  </script>
</Layout>
